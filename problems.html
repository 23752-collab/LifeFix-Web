<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FFB7B2">
  <title>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏±‡∏ç‡∏´‡∏≤</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Chat Interface Styles */
    .chat-container {
      background: #fff;
      border: 3px solid #eee;
      border-radius: 20px;
      padding: 15px;
      height: 300px;
      overflow-y: auto;
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .chat-bubble {
      max-width: 80%;
      padding: 10px 15px;
      border-radius: 15px;
      font-size: 0.95rem;
      line-height: 1.4;
      position: relative;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .bubble-user {
      align-self: flex-end;
      background: #E0F7FA;
      color: #006064;
      border-bottom-right-radius: 2px;
    }

    .bubble-bot {
      align-self: flex-start;
      background: #F1F8E9;
      color: #33691E;
      border-bottom-left-radius: 2px;
      border: 1px solid #DCEDC8;
    }

    .typing-indicator {
      align-self: flex-start;
      background: #f0f0f0;
      padding: 10px 15px;
      border-radius: 15px;
      display: none;
      align-items: center;
      gap: 5px;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      background: #aaa;
      border-radius: 50%;
      animation: typing 1.4s infinite ease-in-out both;
    }

    .typing-dot:nth-child(1) {
      animation-delay: -0.32s;
    }

    .typing-dot:nth-child(2) {
      animation-delay: -0.16s;
    }

    @keyframes typing {

      0%,
      80%,
      100% {
        transform: scale(0);
      }

      40% {
        transform: scale(1);
      }
    }
  </style>
</head>

<body class="bg-cartoon">

  <div class="page" style="max-width: 600px;">

    <div class="top-bar">
      <div id="catTitle" class="app-title" style="font-size: 1.5rem; color: #FF6F61;">‡∏´‡∏°‡∏ß‡∏î...</div>
      <button class="icon-btn" onclick="location.href='category.html'">üîô ‡∏Å‡∏•‡∏±‡∏ö</button>
    </div>

    <div id="list" style="margin-bottom: 30px;"></div>

    <div class="cartoon-card" style="text-align: left; margin-bottom: 20px;">
      <h3 style="color: #43A047; text-align: center;">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏à‡∏≠</h3>
      <textarea id="userProblem" class="cartoon-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏à‡∏≠..."
        style="height: 100px; resize: none;"></textarea>
      <button class="cartoon-btn secondary" onclick="sendProblem()">‡∏™‡πà‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏ó‡∏£‡∏≤‡∏ö</button>
    </div>

    <!-- Smart AI Section -->
    <div class="cartoon-card" style="text-align: left;">
      <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
        <span style="font-size: 2rem;">ü§ñ</span>
        <h3 style="color: #2196F3; margin: 0;">‡∏û‡∏µ‡πà‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå LifeFix</h3>
      </div>
      <p style="text-align: center; font-size: 0.9rem; color: #888;">‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö!</p>

      <div id="chatBox" class="chat-container">
        <div class="chat-bubble bubble-bot">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡πÄ‡∏≠‡πà‡∏¢? ‡∏ñ‡∏≤‡∏°‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞! üòÉ</div>
      </div>

      <div class="typing-indicator" id="typingIndicator">
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
      </div>

      <div style="display: flex; gap: 10px;">
        <input id="aiInput" class="cartoon-input" style="margin: 0;" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°..."
          onkeypress="handleEnter(event)">
        <button class="cartoon-btn" style="width: auto; margin: 0; padding: 0 20px;" onclick="askSmartAI()">‡∏™‡πà‡∏á</button>
      </div>
    </div>

  </div>

  <script>
    let cat = localStorage.getItem("cat");
    document.getElementById("catTitle").innerText = "‡∏´‡∏°‡∏ß‡∏î " + cat;

    // --- 1. Basic Problems List Logic ---
    const problems = {
      "‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô": [
        "‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà",
        "‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡πÅ‡∏û‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠",
        "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°‡πÄ‡∏á‡∏¥‡∏ô",
        "‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡∏ï‡∏±‡∏ß",
        "‡πÑ‡∏°‡πà‡∏Å‡∏•‡πâ‡∏≤‡∏Ç‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà",
        "‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏≤‡∏¢",
        "‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô",
        "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß",
        "‡∏≠‡∏¢‡∏≤‡∏Å‡∏´‡∏≤‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©",
        "‡πÇ‡∏î‡∏ô‡πÇ‡∏Å‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå"
      ],
      "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô": [
        "‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏µ‡∏¢‡∏à‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠",
        "‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á",
        "‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ",
        "‡∏Å‡∏•‡∏±‡∏ß‡∏™‡∏≠‡∏ö‡∏ï‡∏Å",
        "‡∏Ñ‡∏£‡∏π‡∏™‡∏≠‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
        "‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß",
        "‡∏´‡∏°‡∏î‡πÑ‡∏ü‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
        "‡πÇ‡∏î‡∏ô‡∏Å‡∏î‡∏î‡∏±‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Å‡∏£‡∏î",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å",
        "‡∏•‡∏∑‡∏°‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô"
      ],
      "‡∏≠‡∏≤‡∏´‡∏≤‡∏£": [
        "‡∏Å‡∏¥‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡πÑ‡∏°‡πà‡∏≠‡∏¥‡πà‡∏°",
        "‡πÄ‡∏ö‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏°‡πÜ",
        "‡∏≠‡∏¢‡∏≤‡∏Å‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡πâ‡∏ß‡∏ô",
        "‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å",
        "‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡∏ú‡∏±‡∏Å",
        "‡∏Å‡∏¥‡∏ô‡∏î‡∏∂‡∏Å‡∏ö‡πà‡∏≠‡∏¢‡πÜ",
        "‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏Å‡∏£‡∏∞‡πÄ‡∏û‡∏≤‡∏∞",
        "‡∏™‡∏¥‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
        "‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ï‡∏±‡∏ß",
        "‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤"
      ],
      "‡∏≠‡∏∑‡πà‡∏ô‡πÜ": [
        "‡∏ï‡∏¥‡∏î‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå",
        "‡∏ó‡∏∞‡πÄ‡∏•‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô",
        "‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à",
        "‡∏ô‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏•‡∏±‡∏ö",
        "‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏á‡∏≤",
        "‡πÇ‡∏î‡∏ô‡∏ö‡∏π‡∏•‡∏•‡∏µ‡πà (Bully)",
        "‡πÑ‡∏°‡πà‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á",
        "‡∏≠‡∏Å‡∏´‡∏±‡∏Å",
        "‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï",
        "‡∏≠‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô"
      ]
    };

    let list = document.getElementById("list");
    if (problems[cat]) {
      problems[cat].forEach(p => {
        list.innerHTML += `<div class="cartoon-card" style="margin-bottom: 15px; padding: 20px; cursor: pointer; display: flex; align-items: center; justify-content: space-between;" onclick="openDetail('${p}')">
          <span style="font-size: 1.1rem; font-weight: bold;">${p}</span>
          <span style="font-size: 1.5rem;">üëâ</span>
        </div>`;
      });
    } else {
      list.innerHTML = "<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ</p>";
    }

    function openDetail(name) {
      localStorage.setItem("problem", name);
      location.href = "detail.html";
    }

    function sendProblem() {
      let t = document.getElementById("userProblem").value.trim();
      if (!t) { alert("‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏à‡πä‡∏∞"); return; }
      let currentUser = localStorage.getItem("currentUser") || "guest";
      let key = "userProblems_" + currentUser;
      let db = JSON.parse(localStorage.getItem(key) || "[]");

      db.push({ cat: cat, text: t, time: new Date().toLocaleString() });
      localStorage.setItem(key, JSON.stringify(db));
      document.getElementById("userProblem").value = "";
      alert("‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏Å‡πÄ‡∏£‡∏≤‡∏ô‡∏∞ ‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡πâ‡∏ß üíö");
    }

    // --- 2. Smart AI Logic ---

    // Knowledge Base with Intent Scoring
    const knowledgeBase = [
      // --- General ---
      {
        intent: "greeting",
        keywords: ["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ", "‡∏î‡∏µ‡∏à‡πâ‡∏≤", "‡∏Æ‡∏±‡∏•‡πÇ‡∏´‡∏•", "‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢", "hi", "hello"],
        category: "general",
        response: "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á? ‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‡∏ü‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏ô‡∏∞ üòä"
      },
      {
        intent: "identity",
        keywords: ["‡πÉ‡∏Ñ‡∏£", "‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£", "‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ", "‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå"],
        category: "general",
        response: "‡∏û‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå LifeFix ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏û‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ô‡πâ‡∏≠‡∏á‡πÜ ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô ‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡∏ñ‡∏≤‡∏°‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!"
      },
      // --- Finance ---
      {
        intent: "save_money",
        keywords: ["‡∏≠‡∏≠‡∏°", "‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô", "‡∏´‡∏¢‡∏≠‡∏î‡∏Å‡∏£‡∏∞‡∏õ‡∏∏‡∏Å", "‡∏£‡∏ß‡∏¢", "‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö"],
        category: "‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô",
        response: "‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πà‡∏á‡πÜ ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°? ‡∏•‡∏≠‡∏á‡∏™‡∏π‡∏ï‡∏£‡∏ô‡∏µ‡πâ‡∏î‡∏π‡∏™‡∏¥:\n1. ‡∏´‡∏±‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏° (‡πÄ‡∏ä‡πà‡∏ô 10%)\n2. ‡∏´‡∏¢‡∏≠‡∏î‡∏Å‡∏£‡∏∞‡∏õ‡∏∏‡∏Å‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏•‡∏±‡∏ö‡∏ñ‡∏∂‡∏á‡∏ö‡πâ‡∏≤‡∏ô\n3. ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡πÅ‡∏û‡∏á‡πÜ ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏Å‡πà‡∏≠‡∏ô 3 ‡∏ß‡∏±‡∏ô ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≠‡∏¢‡∏ã‡∏∑‡πâ‡∏≠\n‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞! üí∞"
      },
      {
        intent: "debt",
        keywords: ["‡∏´‡∏ô‡∏µ‡πâ", "‡∏ï‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô", "‡∏¢‡∏∑‡∏°‡πÄ‡∏á‡∏¥‡∏ô", "‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"],
        category: "‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô",
        response: "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏≠‡∏∂‡∏î‡∏≠‡∏±‡∏î‡πÉ‡∏à‡πÄ‡∏ô‡∏≠‡∏∞ ‡∏û‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ß‡πà‡∏≤‡∏ï‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏Ñ‡∏£‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏¢‡∏≠‡∏¢‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏ô‡∏¥‡∏î‡∏Ñ‡∏£‡∏±‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≠‡∏á‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡∏ï‡∏£‡∏á‡πÜ ‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ô‡∏∞ ü§ù"
      },
      {
        intent: "spending",
        keywords: ["‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô", "‡∏ü‡∏∏‡πà‡∏°‡πÄ‡∏ü‡∏∑‡∏≠‡∏¢", "‡∏´‡∏°‡∏î", "‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á", "‡∏ä‡πá‡∏≠‡∏õ"],
        category: "‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô",
        response: "‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏°‡∏î‡πÑ‡∏ß‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°? ‡∏•‡∏≠‡∏á‡∏à‡∏î '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢' ‡∏î‡∏π‡∏™‡∏¥‡∏Ñ‡∏£‡∏±‡∏ö (‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏ô‡∏∞!) ‡∏û‡∏≠‡πÄ‡∏£‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏´‡∏°‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡∏à‡∏∏‡∏î‡πÄ‡∏•‡∏¢! üìâ"
      },
      // --- Study ---
      {
        intent: "exam",
        keywords: ["‡∏™‡∏≠‡∏ö", "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô", "‡πÄ‡∏Å‡∏£‡∏î", "‡∏ï‡∏Å", "‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"],
        category: "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
        response: "‡∏ä‡πà‡∏ß‡∏á‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å! ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Ñ‡∏∑‡∏≠:\n1. ‡∏≠‡πà‡∏≤‡∏ô‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°\n2. ‡πÉ‡∏ä‡πâ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏™‡∏µ‡πÜ\n3. ‡∏ï‡∏¥‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô (‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏≥‡πÅ‡∏°‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô 90%)\n‡∏™‡∏π‡πâ‡πÄ‡∏Ç‡∏≤‡∏ô‡∏∞! üìö"
      },
      {
        intent: "homework",
        keywords: ["‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô", "‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à", "‡∏¢‡∏≤‡∏Å", "‡∏•‡∏≠‡∏Å", "‡∏Ñ‡∏£‡∏π"],
        category: "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
        response: "‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡πÄ‡∏´‡∏£‡∏≠? ‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ Pomodoro ‡∏î‡∏π‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥ 25 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏û‡∏±‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏ö‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏£‡∏ß‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞! ‚è∞"
      },
      // --- Food ---
      {
        intent: "health_eating",
        keywords: ["‡∏Å‡∏¥‡∏ô", "‡∏≠‡πâ‡∏ß‡∏ô", "‡∏ú‡∏≠‡∏°", "‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å", "‡∏´‡∏¥‡∏ß", "‡∏Ç‡πâ‡∏≤‡∏ß"],
        category: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
        response: "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏¥‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å! ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Å‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 3 ‡∏°‡∏∑‡πâ‡∏≠‡∏ô‡∏∞ ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏°‡∏∑‡πâ‡∏≠‡πÄ‡∏ä‡πâ‡∏≤‡∏´‡πâ‡∏≤‡∏°‡∏Ç‡∏≤‡∏î! ‡∏ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡∏≠‡πâ‡∏ß‡∏ô ‡πÉ‡∏´‡πâ‡∏•‡∏î‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≥‡∏≠‡∏±‡∏î‡∏•‡∏° ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏≤‡∏Å‡∏¥‡∏ô‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÅ‡∏ó‡∏ô ‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏≠‡πâ‡∏ß‡∏ô‡∏î‡πâ‡∏ß‡∏¢! üçé"
      },
      {
        intent: "pain",
        keywords: ["‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á", "‡πÄ‡∏à‡πá‡∏ö", "‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢", "‡∏≠‡∏≤‡πÄ‡∏à‡∏µ‡∏¢‡∏ô"],
        category: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
        response: "‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡πâ‡∏≠‡∏á ‡πÑ‡∏™‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏ô‡∏∞ ‡∏•‡πâ‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏™‡∏°‡∏≠ ‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤‡∏õ‡∏ß‡∏î‡∏°‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß üè•"
      },
      // --- Other ---
      {
        intent: "stress",
        keywords: ["‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î", "‡πÄ‡∏ö‡∏∑‡πà‡∏≠", "‡πÄ‡∏ã‡πá‡∏á", "‡πÄ‡∏®‡∏£‡πâ‡∏≤", "‡∏£‡πâ‡∏≠‡∏á‡πÑ‡∏´‡πâ"],
        category: "‡∏≠‡∏∑‡πà‡∏ô‡πÜ",
        response: "‡πÇ‡∏≠‡πã‡πÜ ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤‡∏•‡∏∂‡∏Å‡πÜ ‡∏ô‡∏±‡∏ö 1-10 ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏õ‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏ô‡∏î‡∏π‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÜ ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏≠‡∏á‡πÇ‡∏•‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‡∏û‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏ô‡∏∞ üíö"
      },
      {
        intent: "sleep",
        keywords: ["‡∏ô‡∏≠‡∏ô", "‡∏á‡πà‡∏ß‡∏á", "‡∏ï‡∏∑‡πà‡∏ô‡∏™‡∏≤‡∏¢", "‡πÑ‡∏°‡πà‡∏´‡∏•‡∏±‡∏ö"],
        category: "‡∏≠‡∏∑‡πà‡∏ô‡πÜ",
        response: "‡∏≠‡∏¢‡πà‡∏≤‡∏ô‡∏≠‡∏ô‡∏î‡∏∂‡∏Å‡∏ô‡∏∞! ‡∏ß‡∏±‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏£‡∏ô‡∏≠‡∏ô 8-9 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏ñ‡πâ‡∏≤‡∏ô‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏•‡∏±‡∏ö ‡∏•‡∏≠‡∏á‡∏á‡∏î‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≠‡∏ô 30 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏´‡∏•‡∏±‡∏ö‡∏•‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏ï‡∏∑‡πà‡∏ô‡∏°‡∏≤‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô üò¥"
      }
    ];

    function handleEnter(e) {
      if (e.key === 'Enter') askSmartAI();
    }

    function addBubble(text, type) {
      const chatBox = document.getElementById('chatBox');
      const bubble = document.createElement('div');
      bubble.className = `chat-bubble bubble-${type}`;
      bubble.innerText = text;
      chatBox.appendChild(bubble);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function askSmartAI() {
      const inputEl = document.getElementById('aiInput');
      const text = inputEl.value.trim();
      if (!text) return;

      // 1. User Bubble
      addBubble(text, 'user');
      inputEl.value = '';

      // 2. Show Typing Indicator
      const typing = document.getElementById('typingIndicator');
      typing.style.display = 'flex';
      const chatBox = document.getElementById('chatBox');
      chatBox.scrollTop = chatBox.scrollHeight;

      // 3. Process Logic (Simulated Delay)
      setTimeout(() => {
        typing.style.display = 'none';
        const response = processQuery(text);
        addBubble(response, 'bot');
      }, 1200);
    }

    function processQuery(query) {
      const lowerQ = query.toLowerCase();
      const currentCat = localStorage.getItem("cat"); // "‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô", "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", "‡∏≠‡∏≤‡∏´‡∏≤‡∏£", "‡∏≠‡∏∑‡πà‡∏ô‡πÜ"

      // Step 1: Score all intents
      let bestMatch = null;
      let maxScore = 0;

      knowledgeBase.forEach(item => {
        let score = 0;
        item.keywords.forEach(k => {
          if (lowerQ.includes(k)) score += 1;
        });

        if (score > maxScore) {
          maxScore = score;
          bestMatch = item;
        }
      });

      // Step 2: Analyze Result

      // Case A: No keyword match found
      if (maxScore === 0) {
        return "‡∏û‡∏µ‡πà‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡∏ö üòÖ ‡∏•‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ " + currentCat + " ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö";
      }

      // Case B: General Intent (Greeting/Identity) - Always allow
      if (bestMatch.category === "general") {
        return bestMatch.response;
      }

      // Case C: Strict Category Enforcement
      // If the best matching intent belongs to a different category than the current page
      if (bestMatch.category !== currentCat && bestMatch.category !== "‡∏≠‡∏∑‡πà‡∏ô‡πÜ") { // "‡∏≠‡∏∑‡πà‡∏ô‡πÜ" might sometimes overlap, but let's be strict usually
        // Exception: "‡∏≠‡∏∑‡πà‡∏ô‡πÜ" category page allows generic queries? Let's say yes if current is "‡∏≠‡∏∑‡πà‡∏ô‡πÜ"
        if (currentCat === "‡∏≠‡∏∑‡πà‡∏ô‡πÜ") {
          // If current is "Others", maybe allow everything? Or strictly "Others"?
          // Let's be strict: if I am in "Others" but ask about "Money", should I answer?
          // The prompt said: "answer according to the topic... if outside topic, refuse and suggest"
          if (bestMatch.category === "‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô" || bestMatch.category === "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" || bestMatch.category === "‡∏≠‡∏≤‡∏´‡∏≤‡∏£") {
            return `‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á "${bestMatch.category}" ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ü§î\n‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏ß‡∏î "${currentCat}"\n‡∏•‡∏≠‡∏á‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏´‡∏°‡∏ß‡∏î "${bestMatch.category}" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö`;
          }
        } else {
          // Current is Money/Study/Food, but Intent is diff
          return `‡∏≠‡∏∏‡πä‡∏¢! ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö "${bestMatch.category}" ‡∏Ñ‡∏£‡∏±‡∏ö üöß\n‡πÅ‡∏ï‡πà‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏´‡πâ‡∏≠‡∏á "${currentCat}"\n‡∏û‡∏µ‡πà‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≤‡∏°‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏∞ ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÜ ‡∏á‡∏á! ‡∏¢‡πâ‡∏≤‡∏¢‡∏´‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞`;
        }
      }

      // Case D: Correct Category or Safe Fallback
      return bestMatch.response;
    }

    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>

</body>

</html>