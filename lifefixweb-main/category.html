<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FFB7B2">
  <title>р╣Ар╕ер╕╖р╕нр╕Бр╕лр╕бр╕зр╕Фр╕Ыр╕▒р╕Нр╕лр╕▓</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="page" style="max-width: 600px;">

    <div class="top-bar">
      <div class="app-title" style="font-size: 1.5rem; color: #FF6F61;">LifeFix Web" ЁЯОИ</div>
      <div>
        <button class="icon-btn" onclick="openHistory()">ЁЯУЬ р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤</button>
        <button class="icon-btn" onclick="location.href='logout.html'">ЁЯЪк р╕нр╕нр╕Б</button>
      </div>
    </div>

    <h2>р╕нр╕вр╕▓р╕Бр╣Гр╕лр╣Йр╕Кр╣Ир╕зр╕вр╣Ар╕гр╕╖р╣Ир╕нр╕Зр╕нр╕░р╣Др╕гр╕Др╕гр╕▒р╕Ъ?</h2>

    <div class="grid-container">
      <div class="category-item color-blue" onclick="goSolve('р╕Бр╕▓р╕гр╣Ар╕Зр╕┤р╕Щ')">
        <div style="font-size: 3rem;">ЁЯТ░</div>
        <div>р╕Бр╕▓р╕гр╣Ар╕Зр╕┤р╕Щ</div>
      </div>
      <div class="category-item color-green" onclick="goSolve('р╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Щ')">
        <div style="font-size: 3rem;">ЁЯУЪ</div>
        <div>р╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Щ</div>
      </div>
      <div class="category-item color-pink" onclick="goSolve('р╕нр╕▓р╕лр╕▓р╕г')">
        <div style="font-size: 3rem;">ЁЯН▒</div>
        <div>р╕нр╕▓р╕лр╕▓р╕г</div>
      </div>
      <div class="category-item color-yellow" onclick="goSolve('р╕нр╕╖р╣Ир╕Щр╣Ж')">
        <div style="font-size: 3rem;">ЁЯзй</div>
        <div>р╕нр╕╖р╣Ир╕Щр╣Ж</div>
      </div>
    </div>

  </div>

  <script>
    function openHistory() {
      let u = localStorage.getItem("currentUser");
      let h = JSON.parse(localStorage.getItem("history_" + u) || "[]");
      if (h.length == 0) { alert("р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Ир╣Йр╕▓"); return; }

      let t = "ЁЯУЬ р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Вр╕нр╕Зр╕Др╕╕р╕У\n\n";
      h.forEach(x => t += "тАв " + x + "\n");
      alert(t);
    }

    function goSolve(type) {
      localStorage.setItem("cat", type);

      if (type === "р╕нр╕▓р╕лр╕▓р╕г") {
        location.href = "food.html";   // ЁЯСЙ р╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╣Ар╕ер╕╖р╕нр╕Б food / cook
      } else {
        location.href = "problems.html";
      }
    }


    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>

</body>

</html>